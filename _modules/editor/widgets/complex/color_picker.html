<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>editor.widgets.complex.color_picker &mdash; DearDoc dev documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            DearDoc
          </a>
              <div class="version">
                dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../_docs/about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../_docs/about/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../_docs/about/frequently_asked_questions.html">Frequently asked questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../_docs/about/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../_docs/about/license.html">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../_docs/manual.html">Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../_docs/manual/introduction.html">Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../_docs/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../_docs/contributing/introduction.html">Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../autoapi/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../autoapi/editor/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/common/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/database/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.database</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/dispatcher/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.dispatcher</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/ease/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.ease</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/file_watcher/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.file_watcher</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/icon_cache/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.icon_cache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/logger/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.logger</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/math/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.math</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/native/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.native</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/common/util/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.common.util</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/models/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/models/asset/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.asset</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/asset/asset/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.asset.asset</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/asset/importer/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.asset.importer</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/asset/meta/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.asset.meta</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/models/editor/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.editor</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/editor/form/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.editor.form</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/editor/menu_tree/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.editor.menu_tree</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/models/gameplay/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.gameplay</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/gameplay/component/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.gameplay.component</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/gameplay/entity/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.gameplay.entity</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/gameplay/scene/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.gameplay.scene</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/models/graph/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.graph</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/graph/base/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.graph.base</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/graph/fsm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.graph.fsm</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/models/graph/shader/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.models.graph.shader</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/pipeline/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/pipeline/build/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.build</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/pipeline/build/targets/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.build.targets</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../../../autoapi/editor/pipeline/build/targets/default/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.build.targets.default</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/pipeline/build/registry/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.build.registry</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/pipeline/build/shared_task/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.build.shared_task</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/pipeline/run/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.run</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/pipeline/run/targets/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.run.targets</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../../../autoapi/editor/pipeline/run/targets/editor/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.run.targets.editor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../../../autoapi/editor/pipeline/run/targets/external/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.run.targets.external</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/pipeline/run/registry/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.run.registry</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/pipeline/run/shared_task/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.run.shared_task</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/pipeline/core/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.pipeline.core</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/views/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/animation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.animation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/build/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.build</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/console/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.console</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/fsm_graph/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.fsm_graph</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/gallery/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.gallery</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/game/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.game</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/hierarchy/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.hierarchy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/inspector/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.inspector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/preference/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.preference</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/preview/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.preview</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/profiler/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.profiler</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/project/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.project</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/project_setting/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.project_setting</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/scene/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.scene</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/views/shader_graph/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.views.shader_graph</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/widgets/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/widgets/basic/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.basic</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/basic/button/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.basic.button</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/basic/line_edit/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.basic.line_edit</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/basic/search_edit/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.basic.search_edit</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/basic/slider/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.basic.slider</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/widgets/complex/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.complex</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/complex/advanced_menu/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.complex.advanced_menu</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.complex.color_picker</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/complex/form_view/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.complex.form_view</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/complex/tree_stacked/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.complex.tree_stacked</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/complex/tree_view/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.complex.tree_view</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/widgets/container/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.container</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/container/collapsible/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.container.collapsible</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/container/sliding_stacked/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.container.sliding_stacked</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/widgets/misc/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.misc</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/misc/flow_layout/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.misc.flow_layout</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/misc/line/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.misc.line</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/misc/pixmap_icon/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.misc.pixmap_icon</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/misc/toast/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.misc.toast</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../autoapi/editor/widgets/misc/waiting_spinner/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.misc.waiting_spinner</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/widgets/menubar/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.menubar</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/widgets/statusbar/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.statusbar</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../autoapi/editor/widgets/toolbar/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.widgets.toolbar</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/asset_db/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.asset_db</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/editor_prefs/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.editor_prefs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/main_window/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.main_window</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/theme_manager/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.theme_manager</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/editor/view_manager/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">editor.view_manager</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../autoapi/engine/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">engine</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/engine/bridge/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">engine.bridge</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/engine/runtime/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">engine.runtime</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/engine/standalone/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">engine.standalone</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../autoapi/launcher/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">launcher</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../autoapi/tools/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/tools/doc/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools.doc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/tools/hello/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools.hello</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/tools/ide/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools.ide</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/tools/python/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools.python</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../autoapi/tools/report/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools.report</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">DearDoc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">editor.widgets.complex.color_picker</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for editor.widgets.complex.color_picker</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">PySide6.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PySide6.QtCore</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PySide6.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">editor.common.math</span> <span class="kn">import</span> <span class="n">clamp</span><span class="p">,</span> <span class="n">locAt</span><span class="p">,</span> <span class="n">vecAngle</span><span class="p">,</span> <span class="n">lerpI</span><span class="p">,</span> <span class="n">getDir</span>
<span class="kn">from</span> <span class="nn">editor.common.util</span> <span class="kn">import</span> <span class="n">getIde</span><span class="p">,</span> <span class="n">requestTransparentBgBrush</span><span class="p">,</span> <span class="n">toInt</span><span class="p">,</span> <span class="n">toFloat</span><span class="p">,</span> <span class="n">isParentOfWidget</span>
<span class="kn">from</span> <span class="nn">editor.common.icon_cache</span> <span class="kn">import</span> <span class="n">getThemePixmap</span>


<span class="c1">#####################  INTERNAL  #####################</span>
<span class="n">_ColorSpaceLabels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RGB 0-255&#39;</span><span class="p">,</span> <span class="s1">&#39;RGB 0-1.0&#39;</span><span class="p">,</span> <span class="s1">&#39;HSV      &#39;</span><span class="p">]</span>
<span class="n">_ColorSpaceRgb</span><span class="p">,</span> <span class="n">_ColorSpaceRgbF</span><span class="p">,</span> <span class="n">_ColorSpaceHsv</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">_ColorRing</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">currentColor</span>
	<span class="k">def</span> <span class="nf">setColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
		<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsvF</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">updateCurrentColor</span><span class="p">(</span><span class="s1">&#39;ring&#39;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="n">size</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ringWidth</span> <span class="o">=</span> <span class="mi">24</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ringRadius</span> <span class="o">=</span> <span class="mi">96</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFixedSize</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">buildColorRing</span><span class="p">()</span>
		<span class="c1"># self.updateColorRectImage()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">mouseTarget</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">overridePaintFunc</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cachedHue</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">colorChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">buildColorRing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">path</span> <span class="o">=</span> <span class="n">QPainterPath</span><span class="p">()</span>
		<span class="n">rw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringWidth</span>
		<span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringRadius</span> <span class="o">-</span> <span class="n">rw</span> <span class="o">/</span> <span class="mi">2</span>
		<span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringRadius</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">rw</span>
		<span class="n">rect</span> <span class="o">=</span> <span class="n">QRectF</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
		<span class="n">path</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
		<span class="n">path</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">adjusted</span><span class="p">(</span><span class="n">rw</span><span class="p">,</span> <span class="n">rw</span><span class="p">,</span> <span class="o">-</span><span class="n">rw</span><span class="p">,</span> <span class="o">-</span><span class="n">rw</span><span class="p">))</span>

		<span class="n">gradient</span> <span class="o">=</span> <span class="n">QConicalGradient</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">center</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>   <span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">))</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span>   <span class="mi">0</span><span class="p">))</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span>   <span class="mi">0</span><span class="p">))</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span>   <span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">))</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">ringPath</span> <span class="o">=</span> <span class="n">path</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ringGradient</span> <span class="o">=</span> <span class="n">gradient</span>

		<span class="n">offset</span> <span class="o">=</span> <span class="mi">57</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">toRect</span><span class="p">()</span><span class="o">.</span><span class="n">adjusted</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="o">-</span><span class="n">offset</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorRectImage</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">QImage</span><span class="o">.</span><span class="n">Format_RGB888</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">updateColorRectImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hue</span><span class="p">):</span>
		<span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
		<span class="c1"># hue = clamp(self.color().hsvHueF(), 0, 1)</span>
		<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
			<span class="n">saturation</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="p">(</span><span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
			<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
				<span class="n">value</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">y</span> <span class="o">/</span> <span class="p">(</span><span class="n">w</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">colorRectImage</span><span class="o">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="n">hue</span><span class="p">,</span> <span class="n">saturation</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">hue</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">hsvHueF</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cachedHue</span> <span class="o">!=</span> <span class="n">hue</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">cachedHue</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">updateColorRectImage</span><span class="p">(</span><span class="n">hue</span><span class="p">)</span>

		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overridePaintFunc</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">overridePaintFunc</span><span class="p">(</span><span class="n">painter</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">QPainter</span><span class="o">.</span><span class="n">Antialiasing</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillPath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ringPath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringGradient</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRectImage</span><span class="p">)</span>

		<span class="c1"># draw ring pos</span>
		<span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">hue</span><span class="p">()</span>
		<span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">vecAngle</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringRadius</span><span class="p">)</span>
		<span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">center</span> <span class="o">+</span> <span class="n">dx</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">center</span> <span class="o">-</span> <span class="n">dy</span><span class="p">)</span>
		<span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringWidth</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawEllipse</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="n">r</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">r</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

		<span class="c1"># draw rect pos</span>
		<span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">saturationF</span><span class="p">()</span>
		<span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">valueF</span><span class="p">()</span>
		<span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">left</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">right</span><span class="p">()</span>
		<span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">top</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">bottom</span><span class="p">()</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">lerpI</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="n">lerpI</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
		<span class="n">r</span> <span class="o">=</span> <span class="mi">6</span>
		<span class="n">R</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">getRgbF</span><span class="p">()</span>
		<span class="n">brightness</span> <span class="o">=</span> <span class="mf">0.2126</span><span class="o">*</span><span class="n">R</span> <span class="o">+</span> <span class="mf">0.7152</span><span class="o">*</span><span class="n">G</span> <span class="o">+</span> <span class="mf">0.0722</span><span class="o">*</span><span class="n">B</span>
		<span class="k">if</span> <span class="n">brightness</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
			<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">))</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">black</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">))</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawEllipse</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="n">r</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">r</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">checkInsideRing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
		<span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
		<span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">center</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">center</span>
		<span class="n">dist2</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">dy</span>
		<span class="n">rin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringRadius</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringWidth</span> <span class="o">/</span> <span class="mi">2</span>
		<span class="n">rout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringRadius</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringWidth</span> <span class="o">/</span> <span class="mi">2</span>
		<span class="k">return</span> <span class="n">rin</span> <span class="o">*</span> <span class="n">rin</span> <span class="o">&lt;=</span> <span class="n">dist2</span> <span class="o">&lt;=</span> <span class="n">rout</span> <span class="o">*</span> <span class="n">rout</span>

	<span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">pos</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
			<span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">left</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">right</span><span class="p">()</span>
			<span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">top</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">bottom</span><span class="p">()</span>
			<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">locAt</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()),</span> <span class="n">locAt</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
			<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">mouseTarget</span> <span class="o">=</span> <span class="s1">&#39;rect&#39;</span>

		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkInsideRing</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
			<span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
			<span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">center</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">center</span>
			<span class="n">angle</span> <span class="o">=</span> <span class="n">getDir</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
			<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">angle</span><span class="o">/</span><span class="mi">360</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">mouseTarget</span> <span class="o">=</span> <span class="s1">&#39;ring&#39;</span>
			<span class="c1"># self.updateColorRectImage()</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">mouseTarget</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">def</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">pos</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseTarget</span> <span class="o">==</span> <span class="s1">&#39;rect&#39;</span><span class="p">:</span>
			<span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">left</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">right</span><span class="p">()</span>
			<span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">top</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRect</span><span class="o">.</span><span class="n">bottom</span><span class="p">()</span>
			<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">locAt</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()),</span> <span class="n">locAt</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
			<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">clamp</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">clamp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">clamp</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">a</span><span class="p">)</span>

		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseTarget</span> <span class="o">==</span> <span class="s1">&#39;ring&#39;</span><span class="p">:</span>
			<span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
			<span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">center</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">center</span>
			<span class="n">angle</span> <span class="o">=</span> <span class="n">getDir</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
			<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">angle</span><span class="o">/</span><span class="mi">360</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="c1"># self.updateColorRectImage()</span>

<span class="k">class</span> <span class="nc">_ColorPickerBtn</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
	<span class="n">clicked</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFixedSize</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="c1"># painter.setRenderHint(QPainter.Antialiasing)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">(),</span> <span class="n">getThemePixmap</span><span class="p">(</span><span class="s1">&#39;color_picker.png&#39;</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">_ColorPreview</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFixedSize</span><span class="p">(</span><span class="mi">76</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setMouseTracking</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">tooltipL</span> <span class="o">=</span> <span class="s1">&#39;The original color. Click to reset to this.&#39;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">tooltipR</span> <span class="o">=</span> <span class="s1">&#39;The new color.&#39;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">useTooltipL</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipL</span><span class="p">)</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">colorChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
			<span class="n">x</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">//</span> <span class="mi">2</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">revertColor</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">x</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
		<span class="n">inLeft</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">//</span> <span class="mi">2</span>
		<span class="k">if</span> <span class="n">inLeft</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">useTooltipL</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">useTooltipL</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipL</span><span class="p">)</span>
		<span class="k">elif</span> <span class="ow">not</span> <span class="n">inLeft</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">useTooltipL</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">useTooltipL</span> <span class="o">=</span> <span class="kc">False</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipR</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="c1"># painter.setRenderHint(QPainter.Antialiasing)</span>
		<span class="n">path</span> <span class="o">=</span> <span class="n">QPainterPath</span><span class="p">()</span>
		<span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
		<span class="n">path</span><span class="o">.</span><span class="n">addRoundedRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setClipPath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

		<span class="n">wHalf</span> <span class="o">=</span> <span class="n">w</span> <span class="o">//</span> <span class="mi">2</span>
		<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
		<span class="n">brush</span> <span class="o">=</span> <span class="n">requestTransparentBgBrush</span><span class="p">()</span>
		<span class="c1"># painter.setPen(Qt.transparent)</span>
		<span class="c1"># painter.setBrush(brush)</span>
		<span class="c1"># painter.drawRoundedRect(0, 0, w, h, 5, 5)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">brush</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wHalf</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">initColor</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="n">wHalf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wHalf</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">currentColor</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">_ColorSpaceDropDown</span><span class="p">(</span><span class="n">QPushButton</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoFocus</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_ColorSpaceLabels</span><span class="p">[</span><span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span><span class="p">])</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showMenu</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFixedSize</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">initMenu</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">initMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">menu</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_TranslucentBackground</span><span class="p">)</span>
		<span class="n">menu</span><span class="o">.</span><span class="n">setWindowFlag</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">FramelessWindowHint</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">_ColorSpaceLabels</span><span class="p">:</span> <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
		<span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span> <span class="n">act</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
		<span class="n">actions</span><span class="p">[</span><span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span><span class="p">]</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
		<span class="n">menu</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onActionTrigger</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setMenu</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">onActionTrigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
		<span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">menu</span><span class="p">()</span><span class="o">.</span><span class="n">actions</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
		<span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span> <span class="n">act</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">act</span> <span class="o">==</span> <span class="n">action</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">updateColorSpace</span><span class="p">(</span><span class="n">actions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">action</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">_ColorCptSlot</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">isAlpha</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">isAlpha</span> <span class="o">=</span> <span class="n">isAlpha</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">handleWidth</span> <span class="o">=</span> <span class="mi">4</span>

	<span class="k">def</span> <span class="nf">updateValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">updateColor</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
		<span class="k">if</span> <span class="n">updateColor</span><span class="p">:</span>
			<span class="n">cpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">cpt</span>
			<span class="n">editor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptA</span><span class="p">:</span>
				<span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getRgbF</span><span class="p">()</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptR</span><span class="p">:</span>
				<span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getRgbF</span><span class="p">()</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptG</span><span class="p">:</span>
				<span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getRgbF</span><span class="p">()</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptB</span><span class="p">:</span>
				<span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getRgbF</span><span class="p">()</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptH</span><span class="p">:</span>
				<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsvF</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptS</span><span class="p">:</span>
				<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsvF</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptV</span><span class="p">:</span>
				<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsvF</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="n">editor</span><span class="o">.</span><span class="n">updateCurrentColor</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;slot</span><span class="si">{</span><span class="n">cpt</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">buildGradient</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">gradient</span> <span class="o">=</span> <span class="n">QLinearGradient</span><span class="p">()</span>
		<span class="n">cpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">cpt</span>
		<span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">currentColor</span>
		<span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">getRgbF</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptA</span><span class="p">:</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptR</span><span class="p">:</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptG</span><span class="p">:</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptB</span><span class="p">:</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptH</span><span class="p">:</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>   <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span>   <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptS</span><span class="p">:</span>
			<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptV</span><span class="p">:</span>
			<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">getHsvF</span><span class="p">()</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
			<span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QColor</span><span class="o">.</span><span class="n">fromHsvF</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">gradient</span>

	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">()</span>
		<span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isAlpha</span><span class="p">:</span>
			<span class="n">brush</span> <span class="o">=</span> <span class="n">requestTransparentBgBrush</span><span class="p">()</span>
			<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">brush</span><span class="p">)</span>

		<span class="n">hw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleWidth</span>
		<span class="n">gradient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buildGradient</span><span class="p">()</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setStart</span><span class="p">(</span><span class="n">hw</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">gradient</span><span class="o">.</span><span class="n">setFinalStop</span><span class="p">(</span><span class="n">w</span> <span class="o">-</span> <span class="n">hw</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">gradient</span><span class="p">)</span>

		<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#222&#39;</span><span class="p">))</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

		<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#aaa&#39;</span><span class="p">))</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#ccc&#39;</span><span class="p">))</span>
		<span class="n">x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">w</span> <span class="o">-</span> <span class="n">hw</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawRect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">hw</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">x</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
		<span class="n">hhw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleWidth</span> <span class="o">/</span> <span class="mi">2</span>
		<span class="n">value</span> <span class="o">=</span> <span class="n">locAt</span><span class="p">(</span><span class="n">hhw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span> <span class="n">hhw</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">updateValue</span><span class="p">(</span><span class="n">clamp</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
	<span class="k">def</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">x</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
		<span class="n">hhw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleWidth</span> <span class="o">/</span> <span class="mi">2</span>
		<span class="n">value</span> <span class="o">=</span> <span class="n">locAt</span><span class="p">(</span><span class="n">hhw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span> <span class="n">hhw</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">updateValue</span><span class="p">(</span><span class="n">clamp</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">_ColorCptLineEdit</span><span class="p">(</span><span class="n">QLineEdit</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ClickFocus</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onEditingFinish</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onTextChange</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="c1"># self.setStyleSheet(&#39;padding-right: -10px;&#39;)</span>

	<span class="k">def</span> <span class="nf">parseText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
		<span class="n">space</span> <span class="o">=</span> <span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span>
		<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgb</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">clamp</span><span class="p">(</span><span class="n">toInt</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">clamp</span><span class="p">(</span><span class="n">toFloat</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">hue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptH</span>
			<span class="k">return</span> <span class="n">clamp</span><span class="p">(</span><span class="n">toInt</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">hue</span> <span class="ow">and</span> <span class="mi">360</span> <span class="ow">or</span> <span class="mi">100</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">onTextChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
		<span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">value</span><span class="p">:</span> <span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span><span class="p">:</span> <span class="k">return</span>
		<span class="n">cpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">cpt</span>
		<span class="n">space</span> <span class="o">=</span> <span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span>
		<span class="n">editor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgb</span><span class="p">:</span>
			<span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getRgb</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptR</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgb</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptG</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgb</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptB</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgb</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptA</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgb</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

		<span class="k">elif</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span>
			<span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getRgbF</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptR</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptG</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptB</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptA</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgbF</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">getHsv</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptH</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsv</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptS</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsv</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptV</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsv</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptA</span><span class="p">:</span>
				<span class="n">editor</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setHsv</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

		<span class="n">editor</span><span class="o">.</span><span class="n">updateCurrentColor</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;edit</span><span class="si">{</span><span class="n">cpt</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">onEditingFinish</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">updateLineEdit</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">home</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">clearFocus</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">mouseDoubleClickEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectAll</span><span class="p">()</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">mouseDoubleClickEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Escape</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">originText</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">home</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">clearFocus</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">keyPressEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">focusInEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">focusInEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">originText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">False</span>

	<span class="k">def</span> <span class="nf">focusOutEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">focusOutEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>

	<span class="k">def</span> <span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasFocus</span><span class="p">():</span> <span class="k">return</span>
		<span class="n">dy</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">evt</span><span class="o">.</span><span class="n">angleDelta</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">updateWithDelta</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span>
		<span class="c1"># self.home(False)</span>

	<span class="k">def</span> <span class="nf">updateWithDelta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deltaDir</span><span class="p">):</span>
		<span class="n">space</span> <span class="o">=</span> <span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span>
		<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgb</span><span class="p">:</span>
			<span class="n">value</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">deltaDir</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span>
			<span class="n">value</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">deltaDir</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
			<span class="n">value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">10000</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptH</span><span class="p">:</span>
				<span class="n">value</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">deltaDir</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">value</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">deltaDir</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">_ColorCptLabel</span><span class="p">(</span><span class="n">QLabel</span><span class="p">):</span>
	<span class="n">moveTriggered</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;padding-bottom: 2px; color: #ccc;&#39;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">QCursor</span><span class="p">(</span><span class="n">getThemePixmap</span><span class="p">(</span><span class="s1">&#39;field_cursor.png&#39;</span><span class="p">),</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">mouseDownPos</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="c1"># self.moveTriggered.connect(lambda dm: print(dm))</span>

	<span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span> <span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">mouseDownPos</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">def</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="c1"># if not self.mouseDownPos: return</span>
		<span class="n">pos</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span><span class="p">:</span>
			<span class="n">dx</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">dx</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span> <span class="o">=</span> <span class="n">pos</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">moveTriggered</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">dx</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">3</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span> <span class="o">=</span> <span class="n">pos</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">moveTriggered</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">dx</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseDownPos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">dx</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span> <span class="o">=</span> <span class="n">pos</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">moveTriggered</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">dx</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">prevMousePos</span> <span class="o">=</span> <span class="n">pos</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">moveTriggered</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">_ColorComponentEdit</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
	<span class="n">CptA</span><span class="p">,</span> <span class="n">CptR</span><span class="p">,</span> <span class="n">CptG</span><span class="p">,</span> <span class="n">CptB</span><span class="p">,</span> <span class="n">CptH</span><span class="p">,</span> <span class="n">CptS</span><span class="p">,</span> <span class="n">CptV</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
	<span class="n">CptLabels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;V&#39;</span><span class="p">]</span>

	<span class="k">def</span> <span class="nf">componentValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
		<span class="n">color</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">currentColor</span>
		<span class="n">space</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">ColorSpace</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptA</span><span class="p">:</span>
			<span class="k">if</span>   <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">alphaF</span><span class="p">()</span>
			<span class="k">elif</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceHsv</span><span class="p">:</span> <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">alphaF</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">alpha</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptR</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">redF</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">red</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptG</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">greenF</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">green</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptB</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">blueF</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">blue</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptH</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">hue</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptS</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">saturationF</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptV</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">valueF</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">componentValueF</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">currentColor</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptA</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">alphaF</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptR</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">redF</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptG</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">greenF</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptB</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">blueF</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptH</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">hueF</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptS</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">saturationF</span><span class="p">()</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptV</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">color</span><span class="o">.</span><span class="n">valueF</span><span class="p">()</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">cpt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="n">layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>

		<span class="n">label</span> <span class="o">=</span> <span class="n">_ColorCptLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">label</span><span class="o">.</span><span class="n">setFixedWidth</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

		<span class="n">slot</span> <span class="o">=</span> <span class="n">_ColorCptSlot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpt</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CptA</span><span class="p">)</span>
		<span class="n">slot</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

		<span class="n">lineEdit</span> <span class="o">=</span> <span class="n">_ColorCptLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">lineEdit</span><span class="o">.</span><span class="n">setFixedSize</span><span class="p">(</span><span class="mi">43</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">lineEdit</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="n">slot</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span> <span class="o">=</span> <span class="n">lineEdit</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">updateComponent</span><span class="p">(</span><span class="n">cpt</span><span class="p">)</span>
		<span class="c1"># slot.updateValue(self.componentValueF())</span>
		<span class="k">def</span> <span class="nf">onLabelMove</span><span class="p">(</span><span class="n">delta</span><span class="p">):</span>
			<span class="n">lineEdit</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">False</span>
			<span class="n">lineEdit</span><span class="o">.</span><span class="n">updateWithDelta</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
			<span class="n">lineEdit</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="n">label</span><span class="o">.</span><span class="n">moveTriggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">onLabelMove</span><span class="p">)</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">colorChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onCurrentColorChange</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">updateLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">space</span> <span class="o">=</span> <span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span>
		<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceRgbF</span><span class="p">:</span>
			<span class="n">value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">componentValue</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">componentValue</span><span class="p">()))</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">home</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">updateComponent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpt</span><span class="p">):</span>
		<span class="c1"># if self.cpt == cpt: return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cpt</span> <span class="o">=</span> <span class="n">cpt</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CptLabels</span><span class="p">[</span><span class="n">cpt</span><span class="p">])</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">updateValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">componentValueF</span><span class="p">())</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">updateLineEdit</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">onCurrentColorChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">reason</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">reason</span> <span class="o">!=</span> <span class="sa">f</span><span class="s1">&#39;slot</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpt</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">updateValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">componentValueF</span><span class="p">())</span>
		<span class="k">if</span> <span class="n">reason</span> <span class="o">!=</span> <span class="sa">f</span><span class="s1">&#39;edit</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpt</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateLineEdit</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">_ColorHexEditValidator</span><span class="p">(</span><span class="n">QRegularExpressionValidator</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QRegularExpression</span><span class="p">(</span><span class="s1">&#39;[A-Fa-f0-9]{,6}&#39;</span><span class="p">),</span> <span class="n">parent</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
		<span class="n">state</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">state</span><span class="p">,</span> <span class="n">text</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">pos</span>

<span class="k">class</span> <span class="nc">_ColorHexEdit</span><span class="p">(</span><span class="n">QLineEdit</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ClickFocus</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">_ColorHexEditValidator</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;padding-left: 12px;&#39;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">onCurrentColorChange</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">currentColor</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">colorChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onCurrentColorChange</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onEditingFinish</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onTextChange</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">def</span> <span class="nf">parseText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
		<span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="mi">6</span> <span class="ow">or</span> <span class="n">length</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="k">return</span> <span class="n">text</span>
		<span class="k">return</span> <span class="kc">False</span>

	<span class="k">def</span> <span class="nf">onTextChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
		<span class="n">tlen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">tlen</span> <span class="o">!=</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">tlen</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span> <span class="k">return</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">text</span><span class="p">:</span> <span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">text</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span><span class="p">:</span> <span class="k">return</span>
		<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setNamedColor</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="n">text</span><span class="p">)</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">updateCurrentColor</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">onEditingFinish</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">clearFocus</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">onCurrentColorChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">reason</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">reason</span> <span class="o">==</span> <span class="s1">&#39;hex&#39;</span><span class="p">:</span> <span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">name</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

	<span class="k">def</span> <span class="nf">mouseDoubleClickEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectAll</span><span class="p">()</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">mouseDoubleClickEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Escape</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">originText</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">clearFocus</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">keyPressEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">focusInEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">focusInEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">originText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">False</span>

	<span class="k">def</span> <span class="nf">focusOutEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">focusOutEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ignoreUpdate</span> <span class="o">=</span> <span class="kc">True</span>

	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#bbb&#39;</span><span class="p">))</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">())</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawText</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">)</span>


<span class="c1">#####################  PUBLIC  #####################</span>
<div class="viewcode-block" id="ColorPicker"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker">[docs]</a><span class="k">class</span> <span class="nc">ColorPicker</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<div class="viewcode-block" id="ColorPicker.colorChanged"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.colorChanged">[docs]</a>	<span class="n">colorChanged</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">QColor</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="c1"># color: QColor, reason: str</span></div>
	
<div class="viewcode-block" id="ColorPicker.ColorSpace"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.ColorSpace">[docs]</a>	<span class="n">ColorSpace</span> <span class="o">=</span> <span class="n">_ColorSpaceRgb</span></div>
<div class="viewcode-block" id="ColorPicker.Instanced"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.Instanced">[docs]</a>	<span class="n">Instanced</span> <span class="o">=</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="ColorPicker.PrevLoc"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.PrevLoc">[docs]</a>	<span class="n">PrevLoc</span> <span class="o">=</span> <span class="kc">None</span></div>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initColor</span><span class="p">):</span>
		<span class="n">ide</span> <span class="o">=</span> <span class="n">getIde</span><span class="p">()</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">ide</span><span class="o">.</span><span class="n">activeWindow</span><span class="p">())</span>
		<span class="n">ide</span><span class="o">.</span><span class="n">focusChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onFocusChange</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Dialog</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">WindowCloseButtonHint</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">WindowTitleHint</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">CustomizeWindowHint</span><span class="p">)</span>
		<span class="c1"># self.setWindowFlags(Qt.Drawer | Qt.WindowCloseButtonHint | Qt.WindowTitleHint | Qt.CustomizeWindowHint)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;Color Editor&#39;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ClickFocus</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFocus</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFixedSize</span><span class="p">(</span><span class="mi">234</span><span class="p">,</span> <span class="mi">464</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">initColor</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">initColor</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">currentColor</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">initColor</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">ColorPicker</span><span class="o">.</span><span class="n">PrevLoc</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ColorPicker</span><span class="o">.</span><span class="n">PrevLoc</span><span class="p">)</span>
		<span class="n">ColorPicker</span><span class="o">.</span><span class="n">Instanced</span> <span class="o">=</span> <span class="kc">True</span>

		<span class="n">btn</span> <span class="o">=</span> <span class="n">_ColorPickerBtn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pickScreenshotColor</span><span class="p">)</span>
		<span class="n">preview</span> <span class="o">=</span> <span class="n">_ColorPreview</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">ring</span> <span class="o">=</span> <span class="n">_ColorRing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">space</span> <span class="o">=</span> <span class="n">_ColorSpaceDropDown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">cptA</span> <span class="o">=</span> <span class="n">_ColorComponentEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptA</span><span class="p">)</span>
		<span class="n">cpt1</span><span class="p">,</span> <span class="n">cpt2</span><span class="p">,</span> <span class="n">cpt3</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ColorSpace</span> <span class="o">==</span> <span class="n">_ColorSpaceHsv</span><span class="p">:</span>
			<span class="n">cpt1</span> <span class="o">=</span> <span class="n">_ColorComponentEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptH</span><span class="p">)</span>
			<span class="n">cpt2</span> <span class="o">=</span> <span class="n">_ColorComponentEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptS</span><span class="p">)</span>
			<span class="n">cpt3</span> <span class="o">=</span> <span class="n">_ColorComponentEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptV</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">cpt1</span> <span class="o">=</span> <span class="n">_ColorComponentEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptR</span><span class="p">)</span>
			<span class="n">cpt2</span> <span class="o">=</span> <span class="n">_ColorComponentEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptG</span><span class="p">)</span>
			<span class="n">cpt3</span> <span class="o">=</span> <span class="n">_ColorComponentEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptB</span><span class="p">)</span>

		<span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

		<span class="n">layoutH</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addStretch</span><span class="p">()</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">preview</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">layoutH</span><span class="p">)</span>

		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span>

		<span class="n">layoutH</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addStretch</span><span class="p">()</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">space</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">layoutH</span><span class="p">)</span>

		<span class="n">layout</span><span class="o">.</span><span class="n">addSpacing</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cpt1</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cpt2</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cpt3</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cptA</span><span class="p">)</span>

		<span class="n">hexLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s1">&#39;Hexadecimal&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
		<span class="n">hexLabel</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;color: #ccc;&#39;</span><span class="p">)</span>
		<span class="n">hexEdit</span> <span class="o">=</span> <span class="n">_ColorHexEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">hexEdit</span><span class="o">.</span><span class="n">setFixedWidth</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
		<span class="n">layoutH</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">hexLabel</span><span class="p">)</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addStretch</span><span class="p">()</span>
		<span class="n">layoutH</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">hexEdit</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">layoutH</span><span class="p">)</span>

		<span class="n">presetBtn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Color Presets Editor&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
		<span class="n">presetBtn</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s1">&#39;QPushButton { margin: 0 10 0 10; height: 12px; }&#39;</span><span class="p">)</span>
		<span class="n">presetBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggleColorPresetEditor</span><span class="p">)</span>
		<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">presetBtn</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">colorRing</span> <span class="o">=</span> <span class="n">ring</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt1</span> <span class="o">=</span> <span class="n">cpt1</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt2</span> <span class="o">=</span> <span class="n">cpt2</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt3</span> <span class="o">=</span> <span class="n">cpt3</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorCptA</span> <span class="o">=</span> <span class="n">cptA</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="ColorPicker.paintEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.paintEvent">[docs]</a>	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">(),</span> <span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#444&#39;</span><span class="p">))</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorPicker.closeEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.closeEvent">[docs]</a>	<span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">closeEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="n">getIde</span><span class="p">()</span><span class="o">.</span><span class="n">focusChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onFocusChange</span><span class="p">)</span>
		<span class="n">ColorPicker</span><span class="o">.</span><span class="n">PrevLoc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
		<span class="n">ColorPicker</span><span class="o">.</span><span class="n">Instanced</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ColorPicker.onFocusChange"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.onFocusChange">[docs]</a>	<span class="k">def</span> <span class="nf">onFocusChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">now</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">now</span><span class="p">:</span> <span class="k">return</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">now</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">):</span> <span class="k">return</span>
		<span class="k">if</span> <span class="n">now</span> <span class="o">!=</span> <span class="bp">self</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">isParentOfWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">now</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="ColorPicker.pickScreenshotColor"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.pickScreenshotColor">[docs]</a>	<span class="k">def</span> <span class="nf">pickScreenshotColor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">def</span> <span class="nf">onPickedColorUpdate</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">finish</span><span class="p">):</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">finish</span><span class="p">:</span> <span class="k">return</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentColor</span> <span class="o">==</span> <span class="n">color</span><span class="p">:</span> <span class="k">return</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgba</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">rgba</span><span class="p">())</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">updateCurrentColor</span><span class="p">(</span><span class="s1">&#39;screen_pick&#39;</span><span class="p">)</span>
		<span class="n">ScreenColorPicker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentColor</span><span class="p">,</span> <span class="n">onPickedColorUpdate</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorRing</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="ColorPicker.updateCurrentColor"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.updateCurrentColor">[docs]</a>	<span class="k">def</span> <span class="nf">updateCurrentColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reason</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentColor</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorPicker.updateColorSpace"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.updateColorSpace">[docs]</a>	<span class="k">def</span> <span class="nf">updateColorSpace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">space</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span> <span class="o">==</span> <span class="n">space</span><span class="p">:</span> <span class="k">return</span>
		<span class="n">ColorPicker</span><span class="o">.</span><span class="n">ColorSpace</span> <span class="o">=</span> <span class="n">space</span>
		<span class="k">if</span> <span class="n">space</span> <span class="o">==</span> <span class="n">_ColorSpaceHsv</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt1</span><span class="o">.</span><span class="n">updateComponent</span><span class="p">(</span><span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptH</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt2</span><span class="o">.</span><span class="n">updateComponent</span><span class="p">(</span><span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptS</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt3</span><span class="o">.</span><span class="n">updateComponent</span><span class="p">(</span><span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptV</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCptA</span><span class="o">.</span><span class="n">updateLineEdit</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt1</span><span class="o">.</span><span class="n">updateComponent</span><span class="p">(</span><span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptR</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt2</span><span class="o">.</span><span class="n">updateComponent</span><span class="p">(</span><span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptG</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCpt3</span><span class="o">.</span><span class="n">updateComponent</span><span class="p">(</span><span class="n">_ColorComponentEdit</span><span class="o">.</span><span class="n">CptB</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorCptA</span><span class="o">.</span><span class="n">updateLineEdit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ColorPicker.revertColor"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.revertColor">[docs]</a>	<span class="k">def</span> <span class="nf">revertColor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">currentColor</span><span class="o">.</span><span class="n">setRgba</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initColor</span><span class="o">.</span><span class="n">rgba</span><span class="p">())</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">updateCurrentColor</span><span class="p">(</span><span class="s1">&#39;revert&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorPicker.toggleColorPresetEditor"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.toggleColorPresetEditor">[docs]</a>	<span class="k">def</span> <span class="nf">toggleColorPresetEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span> <span class="o">=</span> <span class="n">ColorPresetEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="ColorPicker.moveEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.moveEvent">[docs]</a>	<span class="k">def</span> <span class="nf">moveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">moveEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span><span class="p">:</span>
			<span class="c1"># self.presetEditor.updateLoc()</span>
			<span class="n">dm</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span> <span class="o">-</span> <span class="n">evt</span><span class="o">.</span><span class="n">oldPos</span><span class="p">()</span>
			<span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">presetEditor</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="n">dm</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorPicker.keyPressEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPicker.keyPressEvent">[docs]</a>	<span class="k">def</span> <span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Escape</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">keyPressEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="ScreenColorPicker"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker">[docs]</a><span class="k">class</span> <span class="nc">ScreenColorPicker</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<div class="viewcode-block" id="ScreenColorPicker.colorUpdated"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.colorUpdated">[docs]</a>	<span class="n">colorUpdated</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="n">QColor</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span></div>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">defaultColor</span><span class="p">,</span> <span class="n">onColorUpdate</span><span class="p">,</span> <span class="n">showPreview</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">overridePaint</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">getIde</span><span class="p">()</span><span class="o">.</span><span class="n">activeWindow</span><span class="p">())</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_TranslucentBackground</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Window</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">FramelessWindowHint</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">WindowStaysOnTopHint</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QApplication</span><span class="o">.</span><span class="n">primaryScreen</span><span class="p">()</span><span class="o">.</span><span class="n">virtualGeometry</span><span class="p">())</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setMouseTracking</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grabScreen</span><span class="p">()</span><span class="o">.</span><span class="n">toImage</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">defaultColor</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">defaultColor</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">onColorUpdate</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorUpdated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">onColorUpdate</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">showPreview</span> <span class="o">=</span> <span class="n">showPreview</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">overridePaint</span> <span class="o">=</span> <span class="n">overridePaint</span>
		<span class="k">if</span> <span class="n">overridePaint</span><span class="p">:</span> <span class="n">overridePaint</span><span class="o">.</span><span class="n">overridePaintFunc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawPreview</span>

<div class="viewcode-block" id="ScreenColorPicker.closeEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.closeEvent">[docs]</a>	<span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">closeEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">overridePaint</span><span class="p">:</span> <span class="k">return</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">overridePaint</span><span class="o">.</span><span class="n">overridePaintFunc</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="ScreenColorPicker.grabScreen"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.grabScreen">[docs]</a>	<span class="k">def</span> <span class="nf">grabScreen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">final</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="n">final</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">screen</span> <span class="ow">in</span> <span class="n">QApplication</span><span class="o">.</span><span class="n">screens</span><span class="p">():</span>
			<span class="n">rect</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
			<span class="n">screenshot</span> <span class="o">=</span> <span class="n">screen</span><span class="o">.</span><span class="n">grabWindow</span><span class="p">()</span>
			<span class="n">painter</span><span class="o">.</span><span class="n">drawPixmap</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">screenshot</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">final</span></div>

<div class="viewcode-block" id="ScreenColorPicker.keyPressEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.keyPressEvent">[docs]</a>	<span class="k">def</span> <span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">key</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">key</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Escape</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorUpdated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultColor</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScreenColorPicker.mousePressEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.mousePressEvent">[docs]</a>	<span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">btn</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">button</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">btn</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">RightButton</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorUpdated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultColor</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		<span class="k">elif</span> <span class="n">btn</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MiddleButton</span><span class="p">:</span>
			<span class="n">evt</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">pixelColor</span><span class="p">(</span><span class="n">evt</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">colorUpdated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScreenColorPicker.mouseMoveEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.mouseMoveEvent">[docs]</a>	<span class="k">def</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="c1"># self.screen = self.grabScreen().toImage()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">colorUpdated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">pixelColor</span><span class="p">(</span><span class="n">evt</span><span class="o">.</span><span class="n">pos</span><span class="p">()),</span> <span class="kc">False</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overridePaint</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">overridePaint</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScreenColorPicker.paintEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.paintEvent">[docs]</a>	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">()</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">showPreview</span><span class="p">:</span> <span class="k">return</span>

		<span class="n">pos</span> <span class="o">=</span> <span class="n">QCursor</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
		<span class="n">px</span><span class="p">,</span> <span class="n">py</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
		<span class="n">offset</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">halfSize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">55</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">py</span> <span class="o">+</span> <span class="n">offset</span>
		<span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">w</span><span class="p">:</span> <span class="n">x</span> <span class="o">=</span> <span class="n">px</span> <span class="o">-</span> <span class="n">offset</span> <span class="o">-</span> <span class="n">size</span>
		<span class="k">if</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="n">h</span> <span class="o">-</span> <span class="mi">45</span><span class="p">:</span> <span class="n">y</span> <span class="o">=</span> <span class="n">py</span> <span class="o">-</span> <span class="n">offset</span> <span class="o">-</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">35</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#0a0&#39;</span><span class="p">))</span>
		<span class="n">tarRect</span> <span class="o">=</span> <span class="n">QRect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
		<span class="n">srcRect</span> <span class="o">=</span> <span class="n">QRect</span><span class="p">(</span><span class="n">px</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">py</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawImage</span><span class="p">(</span><span class="n">tarRect</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">srcRect</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">halfSize</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">halfSize</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">halfSize</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">halfSize</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScreenColorPicker.drawPreview"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ScreenColorPicker.drawPreview">[docs]</a>	<span class="k">def</span> <span class="nf">drawPreview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">painter</span><span class="p">):</span>
		<span class="n">margin</span> <span class="o">=</span> <span class="mi">11</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">margin</span><span class="p">,</span> <span class="n">margin</span>
		<span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">overridePaint</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span> <span class="n">margin</span> <span class="o">*</span> <span class="mi">2</span>
		
		<span class="n">pos</span> <span class="o">=</span> <span class="n">QCursor</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
		<span class="n">px</span><span class="p">,</span> <span class="n">py</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">160</span><span class="p">))</span>
		<span class="n">srcRect</span> <span class="o">=</span> <span class="n">QRect</span><span class="p">(</span><span class="n">px</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="n">py</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">tarRect</span> <span class="o">=</span> <span class="n">QRect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawImage</span><span class="p">(</span><span class="n">tarRect</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">srcRect</span><span class="p">)</span>
		<span class="n">ds</span> <span class="o">=</span> <span class="n">size</span> <span class="o">/</span> <span class="p">(</span><span class="mi">20</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span> <span class="o">+</span> <span class="mi">2</span><span class="p">):</span>
			<span class="n">d</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">ds</span><span class="p">)</span>
			<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">d</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">d</span><span class="p">)</span>
			<span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">d</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">d</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>

		<span class="c1"># painter.setPen(QColor(&#39;#080&#39;))</span>
		<span class="c1"># d = size // 2</span>
		<span class="c1"># painter.drawLine(x, y + d, x + size, y + d)</span>
		<span class="c1"># painter.drawLine(x + d, y, x + d, y + size)</span>

		<span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#080&#39;</span><span class="p">))</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">transparent</span><span class="p">)</span>
		<span class="n">offset</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">ds</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
		<span class="n">ids</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">drawRect</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">ids</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="ColorPresetEditor"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPresetEditor">[docs]</a><span class="k">class</span> <span class="nc">ColorPresetEditor</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFixedSize</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">updateLoc</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Tool</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">WindowCloseButtonHint</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">WindowTitleHint</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">CustomizeWindowHint</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;Color Presets&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="ColorPresetEditor.updateLoc"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPresetEditor.updateLoc">[docs]</a>	<span class="k">def</span> <span class="nf">updateLoc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">parent</span><span class="o">.</span><span class="n">frameGeometry</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">frameGeometry</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
		<span class="n">px</span><span class="p">,</span> <span class="n">py</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">px</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">py</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorPresetEditor.paintEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPresetEditor.paintEvent">[docs]</a>	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">(),</span> <span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#444&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="ColorPresetEditor.closeEvent"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.ColorPresetEditor.closeEvent">[docs]</a>	<span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">closeEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">presetEditor</span> <span class="o">=</span> <span class="kc">None</span></div></div>

<div class="viewcode-block" id="createColorPicker"><a class="viewcode-back" href="../../../../autoapi/editor/widgets/complex/color_picker/index.html#editor.widgets.complex.color_picker.createColorPicker">[docs]</a><span class="k">def</span> <span class="nf">createColorPicker</span><span class="p">(</span><span class="n">initColor</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">ColorPicker</span><span class="o">.</span><span class="n">Instanced</span><span class="p">:</span> <span class="k">return</span>
	<span class="n">ColorPicker</span><span class="p">(</span><span class="n">initColor</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, kakako.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>